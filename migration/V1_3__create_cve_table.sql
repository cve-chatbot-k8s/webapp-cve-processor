CREATE TABLE cve.CVE_RECORDS (
    id UUID DEFAULT uuid_generate_v4(),
    cve_id VARCHAR(30) NOT NULL,
    date_published DATE,
    date_updated DATE NOT NULL,
    cve_json JSONB NOT NULL,
    PRIMARY KEY (cve_id, date_updated)
);



-- versioning can be in the following manner possibly using triggers
-- CREATE OR REPLACE FUNCTION versioning_trigger() RETURNS TRIGGER AS $$
-- BEGIN
--     NEW.version := COALESCE((SELECT MAX(version) FROM CVE_RECORDS WHERE cve_id = NEW.cve_id AND date_updated = NEW.date_updated), 0) + 1;
-- RETURN NEW;
-- END;
-- $$ LANGUAGE plpgsql;
--
-- CREATE TRIGGER versioning_before_insert
--     BEFORE INSERT ON CVE_RECORDS
--     FOR EACH ROW
--     EXECUTE PROCEDURE versioning_trigger();